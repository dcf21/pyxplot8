% FIRST_STEPS.TEX
%
% The documentation in this file is part of PyXPlot
% <http://www.pyxplot.org.uk>
%
% Copyright (C) 2006-2010 Dominic Ford <coders@pyxplot.org.uk>
%               2009-2010 Ross Church
%
% $Id$
%
% PyXPlot is free software; you can redistribute it and/or modify it under the
% terms of the GNU General Public License as published by the Free Software
% Foundation; either version 2 of the License, or (at your option) any later
% version.
%
% You should have received a copy of the GNU General Public License along with
% PyXPlot; if not, write to the Free Software Foundation, Inc., 51 Franklin
% Street, Fifth Floor, Boston, MA  02110-1301, USA

% ----------------------------------------------------------------------------

% LaTeX source for the PyXPlot Users' Guide

\chapter{First Steps With PyXPlot}
\label{ch:first_steps}

In this chapter, we provide a brief overview of the basic commands which are
used to produce simple plots in PyXPlot, principally those whose syntax is
borrowed directly from \gnuplot. Users who are already familiar with \gnuplot\
may wish to skim over this chapter, with the caution that there are some subtle
differences been \gnuplot\ and PyXPlot syntax. In particular,
Section~\ref{sec:latex_incompatibility} describes the use of \LaTeX\ to render
text.

In Chapter~\ref{ch:plotting} we shall revisit the material of the chapter and
show how to produce more advanced plots.

\section{Getting Started}

The simplest way to start PyXPlot is to type {\tt pyxplot} at a shell prompt
to start an interactive session. A PyXPlot command-line prompt will appear,
into which commands can be typed. PyXPlot can be exited either by typing
\indcmdts{exit}, \indcmdts{quit}, or by pressing CTRL-D.

This will probably be a sufficient way to drive PyXPlot to begin with, but as
you begin to plot increasingly complicated graphs, you will find that the
number of commands required to set them up will grow. With time, you will
probably find that it becomes preferable, instead of typing these commands into
an interactive session every time you want to use them, to store lists of the
commands that you use in text files. Once a list of the commands is stored in a
text file, called a script, they can be executed automatically by PyXPlot by
passing the filename of the command script to it on the shell command line, for
example:\index{command-line syntax}

\begin{verbatim}
pyxplot foo.ppl
\end{verbatim}

\noindent In this case, PyXPlot would execute all of the commands in the file
{\tt foo.ppl} and then exit immediately afterwards. By convention, we choose to
suffix the filenames of PyXPlot command scripts with {\tt .ppl}. This is not
strictly necessary, but does allow PyXPlot scripts to be easily distinguished
from other text files in a filing system. The filenames of several command
scripts may be passed to PyXPlot on a single command line, indicating that they
should be executed in sequence:

\begin{verbatim}
pyxplot foo1.ppl foo2.ppl foo3.ppl
\end{verbatim}

It is also possible to have a single PyXPlot session which alternates between
running command scripts autonomously and allowing the user to enter commands
interactively between running the scripts. There are two ways of doing this,
one of which is to pass PyXPlot the magic filename {\tt --} on the command
line:

\begin{verbatim}
pyxplot foo1.ppl - foo2.ppl
\end{verbatim}

\noindent This magic filename represents an interactive session, which
commences after the execution of {\tt foo1.ppl}, and should be terminated by
the user in the usual way after use, using either the \indcmdts{exit} or
\indcmdts{quit} commands. After the interactive session is finished, PyXPlot
will automatically execute the command script {\tt foo2.ppl}.

From within an interactive session, it is possible to run a command script
using the \indcmdt{load}:

\begin{verbatim}
pyxplot> load 'foo.ppl'
\end{verbatim}

\noindent This example would have the same effect as typing the contents of the
file {\tt foo.ppl} into the present interactive terminal.

Usually a text editor is used to produce PyXPlot command scripts, but the
\indcmdt{save} may also assist. This stores a history of the commands which
have been typed into the present interactive session to file.

\begin{boxout}
From the shell command line, PyXPlot accepts the following switches which
modify its behaviour:\index{command line syntax}
\vspace{0.5cm}

\begin{tabular}{p{3.0cm}p{8.3cm}}
{\tt -h --help} & Display a short help message listing the available command-line switches.\\
{\tt -v --version} & Display the current version number of PyXPlot.\\
{\tt -q --quiet} & Turn off the display of the welcome message on startup. \\
{\tt -V --verbose} & Display the welcome message on startup, as happens by default. \\
{\tt -c --colour} & Use colour highlighting\footnote{This will only function on terminals which support colour output.} to display output in green, warning messages in amber, and error messages in red.\footnote{The authors apologise to those members of the population who are red/green colourblind, but draws their attention to the following sentence.} These colours can be changed in the {\tt terminal} section of the configuration file; see Section~\ref{sec:configfile_terminal} for more details. \\
{\tt -m --monochrome} & Do not use colour highlighting, as happens by default. \\
\end{tabular}
\caption{A list of the command line options accepted by PyXPlot.}
\label{box:command_switches}
\end{boxout}

\begin{boxout}
When PyXPlot is used interactively, its command-line environment is based upon
the GNU Readline Library. This means that the up- and down-arrow keys can be
used to repeat or modify previously executed commands. Each user's command
history is stored in his homespace in a history file called {\tt
.pyxplot\_history}, which allows PyXPlot to remember command histories between
sessions. PyXPlot's \indcmdt{save} allows the user a mechanism for saving a
list of the commands which have been typed into the present session to a text
file; this has the following syntax:

\begin{verbatim}
save 'output_filename.ppl'
\end{verbatim}

The related \indcmdt{history} outputs to the terminal a history of all of the
commands which have been typed into this and previous interactive sessions. The
total history can stretch to several hundred lines long, in which case it can
be useful to follow the \indcmdt{history} by an optional number, in which case
it displays the last $n$ commands, e.g.:

\begin{verbatim}
history 20
\end{verbatim}
\caption{The storage of command histories in PyXPlot.}
\label{box:command_history}
\end{boxout}

\section{First Plots}
\label{sec:first_plots}

The basic workhorse command of PyXPlot is the \indcmdt{plot}, which is used to
produce all plots. The following simple example would plot the trigonometric
function $\sin(x)$:

\begin{verbatim}
plot sin(x)
\end{verbatim}

\begin{center}
\includegraphics[width=8cm]{examples/eps/ex_intro_sine.eps}
\end{center}

\noindent The function $\sin(x)$ is one of a large number of standard
mathematical functions, as well as some more specialised functions, which are
built into PyXPlot. We will meet more of these functions in due course, but a
complete list can be found in Appendix~\ref{ch:function_list}.

As well as plotting functions, it is also possible to plot data stored in files
on disk. The following would plot data from a file {\tt data.dat}, taking the
$x$-co-ordinate of each point from the first column of the \datafile, and the
$y$-co-ordinate from the second.  The \datafile\ is assumed to be in plain text
format\footnote{If the filename of a \datafile\ ends with a {\tt .gz} suffix,
it is assuming to be gzipped plaintext, and is decoded accordingly.}, with
columns separated by whitespace and/or commas\footnote{This format is
compatible with the Comma Separated Values (CSV) format produced by many
applications, including Microsoft Excel.}\index{csv files}\index{spreadsheets,
importing data from}\index{Microsoft Excel}\index{gzip}:

\begin{verbatim}
plot 'data.dat'
\end{verbatim}

Several items can be plotted on the same graph by separating them by commas, as
in

\begin{verbatim}
plot 'data.dat', sin(x), cos(x)
\end{verbatim}

\noindent and it is also possible to define one's own variables and functions,
and then plot them, as in

\begin{verbatim}
a = 0.02
b = -1
c = 5
f(x) = a*(x**3) + b*x + c
plot f(x)
\end{verbatim}

\begin{center}
\includegraphics[width=8cm]{examples/eps/ex_intro_func.eps}
\end{center}

These examples show some of the mathematical operators which are available in
PyXPlot, a complete list of which can be found in
Table~\ref{tab:operators_table}.\index{functions!pre-defined}\index{operators}

\begin{table}
\framebox[\textwidth]{
\begin{tabular}{lll}
{\bf Symbol} & {\bf Description} & {\bf Operator Associativity} \\
\hline
{\tt **} & Algebraic exponentiation & right \\
\hline
{\tt -} & Unary minus sign & left \\
{\tt not} & Logical not & left \\
\hline
{\tt *} & Algebraic multiplication & left \\
{\tt /} & Algebraic division & left \\
{\tt \%} & Modulo operator & left \\
\hline
{\tt +} & Algebraic sum & left \\
{\tt -} & Algebraic subtraction & left \\
\hline
{\tt <<} & Left binary shift & left \\
{\tt >>} & Right binary shift & left \\
\hline
{\tt <} & Magnitude comparison & right \\
{\tt >} & Magnitude comparison & right \\
{\tt <=} & Magnitude comparison & right \\
{\tt >=} & Magnitude comparison & right \\
\hline
{\tt ==} & Equality comparison & right \\
{\tt !=} & Equality comparison & right \\
{\tt <>} & Alias for {\tt !=} & right \\
\hline
{\tt \&} & Binary and & left \\
\hline
{\tt \^{}} & Binary exclusive or & left \\
\hline
{\tt |} & Binary or & left \\
\hline
{\tt and} & Logical and & left \\
\hline
{\tt or} & Logical or & left \\
\end{tabular}}
\caption{A list of mathematical operators which PyXPlot recognises, in order of
descending precedence.}
\label{tab:operators_table}
\end{table}

\example{ex:introduction}{An example}{
Here, we have an example.
}

\noindent To unset a variable or function once it has been set, the following
syntax should be
used:\index{variables!unsetting}\index{functions!unsetting}\index{unsetting
variables}

\begin{verbatim}
a =
f(x) =
\end{verbatim}

\section{Comments}

Command files can include comment lines, which should begin with a hash
character, for example:\index{comment lines}\index{command scripts!comment
lines}

\begin{verbatim}
# This is a comment
\end{verbatim}

\noindent Comments may also be placed on the same line as commands, for
example:

\begin{verbatim}
set nokey # I'll have no key on _my_ plot
\end{verbatim}

Long commands may be split over multiple lines in the script by terminating
each line of it with a backslash character, whereupon the following line will
be appended to it.

\section{Printing Text}
\label{sec:string_subs_op}

PyXPlot's \indcmdt{print} can be used to display strings and the results of
calculations on the terminal. In the following examples, we show both the
commands typed by the user, which are preceded by PyXPlot prompts {\tt
pyxplot>}, and the text returned by PyXPlot:

\begin{verbatim}
pyxplot> a=2
pyxplot> print "Hello World!"
Hello World!
pyxplot> print a
2
\end{verbatim}

\begin{verbatim}
pyxplot> f(x) = x**2
pyxplot> a=3
pyxplot> print "The value of ",a," squared is ",f(a),"."
The value of 3 squared is 9.
\end{verbatim}

\noindent Values may also be substituted into strings using the {\tt \%}
operator\index{\% operator@{\tt \%} operator}, which works in a similar fashion
to Python's string substitution operator\index{string operators!substitution} or
the {\tt printf} command in C.  The list of values to be substituted into the
string should be a ()-bracketed list\footnote{Unlike in Python, the brackets
are obligatory; {\tt '\%d'\%2} is {\it not} valid in PyXPlot, and should be
written as {\tt '\%d'\%(2)}.}:

\begin{verbatim}
pyxplot> print "The value of %d squared is %d."%(a,f(a))
The value of 3 squared is 9.
pyxplot> print "The %s of f(%f) is %d."%("value",sqrt(2),f(sqrt(2)))
The value of f(1.414214) is 2.
\end{verbatim}

As in C, {\tt \%d} means that in integer should be printed, {\tt \%f} means
that a floating point number should be printed, and {\tt \%e} means that a
floating point number should be printed in scientific format. {\tt \%s} has a
slightly different meaning in PyXPlot from in C: it can be used either to
substitute a string, or to substitute a floating point number in whatever
format PyXPlot deems most appropriate. As in C, {\tt \%16f} means that a
floating point number should be displayed in a column of width 16 characters.
{\tt \%-16f} is similar, but means that the number should be left-justified,
and {\tt \%.2f} means that the number should be displayed accurate to two
decimal places.

\section{Axis Labels and Titles}
\label{sec:latex_incompatibility}

Labels can be added to the two axes of a plot, and a title put at the top.
Labels should be placed between either single (') or double (") quotes.  For
example:

\begin{verbatim}
set xlabel "Horizontal axis"
set ylabel "Vertical axis"
set title 'A plot with labelled axes'
plot
\end{verbatim}

\begin{center}
\includegraphics[width=8cm]{examples/eps/ex_axislabs.eps}
\end{center}

\noindent Note that the labels and title, and indeed all text
labels in PyXPlot, are rendered using \LaTeX, and so any \LaTeX\ commands can
be used.  As a caveat, however, this does mean that care needs to be taken to
escape any of \LaTeX's reserved characters -- i.e.:
$\backslash$~\&~\%~\#~\{~\}~\$~\_~\^{} or $\sim$.

Because of the use of quotes to delimit text labels, special care needs to be
taken when apostrophe and quote characters are used. The following command
would raise an error, because the apostrophe would be interpreted as marking
the end of the text label:

\begin{dontdo}
set xlabel 'My plot's X axis'
\end{dontdo}

\noindent The following would achieve the desired effect:

\begin{dodo}
set xlabel "My plot's X axis"
\end{dodo}

To make it possible to render \LaTeX\ strings containing both single and double
quote characters -- for example, to put a German umlaut on the name `J\"org' in
the \LaTeX\ string `{\tt J$\backslash$"org's Data}' -- PyXPlot recognises the
backslash character to be an escape character when followed by either~' or~" in
a \LaTeX\ string. This is the \textit{only} case in which PyXPlot considers
$\backslash$ an escape character. To render the example string above, one would
type:\index{escape characters}\index{backslash character}\index{accented
characters}

\begin{dodo}
set xlabel "J$\backslash$"org's Data"
\end{dodo}

\noindent In this example, two backslashes are required.  The first is the
\LaTeX\ escape character used to produce the umlaut; the second is a PyXPlot
escape character, used so that the~" character is not interpreted as
delimiting the string. \index{escape characters}\index{quote
characters}\index{special characters}

Having set labels and titles, they may be removed thus:

\begin{verbatim}
set xlabel ''
set ylabel ''
set title ''
\end{verbatim}

\noindent These are two other ways of removing the title from a plot:

\begin{verbatim}
set notitle
unset title
\end{verbatim}

The \indcmdt{unset} may be followed by almost any word that can follow the {\tt
set} command, such as {\tt xlabel} or {\tt title}, to return that setting to
its default configuration. The \indcmdt{reset} restores all configurable
parameters to their default states.

\section{Querying the Values of Settings}

As the previous section has demonstrated, the \indcmdt{set} is used in a wide
range of ways to configure the way in which plots appear; we will meet many
more in due course. The corresponding \indcmdt{show} can be used to query the
current values of settings. To query the value of one particular setting, the
\indcmdt{show} should be followed by the name of the setting:

\begin{verbatim}
show title
\end{verbatim}

\noindent Alternatively, several settings may be requested at once, or all
settings beginning with a certain string of characters can be queried, as in
the following two examples:

\begin{verbatim}
show xlabel ylabel key
show g
\end{verbatim}

\noindent The special keyword {\tt settings} may be used to display the values
of all settings which can be set with the {\tt set} command. A list of other
special keywords which the \indcmdt{show} accepts in given in
Table~\ref{tab:show_keywords}.

\begin{table}
\begin{center}
\begin{tabular}{|lp{9cm}|}
\hline
{\bf Query} & {\bf Description} \\ \hline
{\tt functions} & Lists all currently defined mathematical functions, both those which are built into PyXPlot, and those which the user has defined.\\
{\tt settings} & Lists the current values of all settings which can be set with the {\tt set} command.\\
{\tt subroutines} & Lists all subroutines which have been defined with the {\tt subroutine} command.\\
{\tt units} & Lists all of the physical units which PyXPlot is currently set up to recognise.\\
{\tt userfunctions} & Lists all current user-defined mathematical functions.\\
{\tt variables} & Lists the values of all currently-defined variables.\\
\hline
\end{tabular}
\end{center}
\caption{The special keywords which the \indcmdt{show} recognises.}
\label{tab:show_keywords}
\end{table}

Generally, the \indcmdt{show} displays each setting in the form of a
\indcmdt{set} which could be used to set that setting, together with a comment
to briefly explain what effect the setting has. This means that the output can
be pasted directly into another PyXPlot terminal to copy settings from one
session to another. However, it should be noted that some settings, such as
{\tt papersize} are only pastable once the \indcmdt{set numerics typeable} has
been issued, for reasons which will be explained in Section~\ref{sec:pastable}.

When a colour-highlighted interactive session is used, settings which have been
changed are highlighted in yellow, whilst those settings which are unchanged
from PyXPlot's default configuration, or from a user-supplied configuration
file, are shown in green.

\section{Plotting \Datafile s}
\label{sec:plot_datafiles}

In the simple example of the previous section, we plotted the first column of a
\datafile\ against the second. It is also possible to plot any arbitrary column
of a \datafile\ against any other; the syntax for doing this is:\indmod{using}

\begin{verbatim}
plot 'data.dat' using 3:5
\end{verbatim}

\noindent This example would plot the contents of the fifth column of the file
{\tt data.dat} on the vertical axis, against the the contents of the third
column on the horizontal axis. As mentioned above, columns in \datafile s can be
separated using whitespace and/or commas.  Algebraic expressions may also be
used in place of column numbers, for example:

\begin{verbatim}
plot 'data.dat' using (3+$1+$2):(2+$3)
\end{verbatim}

\noindent In such expressions, column numbers are prefixed by dollar signs, to
distinguish them from numerical constants. The example above would plot the sum
of the values in the first two columns of the \datafile, plus three, on the
horizontal axis, against two plus the value in the third column on the vertical
axis. A more advanced example might be:

\begin{verbatim}
plot 'data.dat' using 3.0:$($2)
\end{verbatim}

\noindent This would place all of the \datapoint s on the line $x=3$, meanwhile
drawing their vertical positions from the value of some column $n$ in the
\datafile, where the value of $n$ is itself read from the second column of the
\datafile.

Later, in Section~\ref{sec:horizontal_datafiles}, I shall discuss how to plot
rows of \datafile s against one another, in horizontally arranged \datafile s.

It is also possible to plot data from only selected lines within a \datafile.
When PyXPlot reads a \datafile, it looks for any blank lines in the file. It
divides the \datafile\ up into {\it data blocks}, each being separated from the
next by a single blank line. The first datablock is numbered~0, the next~1, and
so on.  \index{datafile format}

When two or more blank lines are found together, the \datafile\ is divided up
into {\it index blocks}. The first index block is numbered~0, the next~1, and
so on. Each index block may be made up of a series of data blocks. To clarify
this, a labelled example \datafile\ is shown in
Figure~\ref{fig:sample_datafile}.

\begin{figure}
\framebox[\textwidth]{
\begin{tabular}{p{2.2cm}l}
{\tt 0.0 \ 0.0} & Start of index 0, data block 0. \\
{\tt 1.0 \ 1.0} & \\
{\tt 2.0 \ 2.0} & \\
{\tt 3.0 \ 3.0} & \\
                   & A single blank line marks the start of a new data block. \\
{\tt 0.0 \ 5.0} & Start of index 0, data block 1. \\
{\tt 1.0 \ 4.0} & \\
{\tt 2.0 \ 2.0} & \\
                   & A double blank line marks the start of a new index. \\
                   & ... \\
{\tt 0.0 \ 1.0} & Start of index 1, data block 0. \\
{\tt 1.0 \ 1.0} & \\
                   & A single blank line marks the start of a new data block. \\
{\tt 0.0 \ 5.0} & Start of index 1, data block 1. \\
                   & $<$etc$>$ \\
\end{tabular}}
\caption{An example PyXPlot \datafile\ -- the \datafile\ is shown in the two left-hand columns, and commands are shown to the right.}
\label{fig:sample_datafile}
\end{figure}

By default, when a \datafile\ is plotted, all data blocks in all index blocks are
plotted. To plot only the data from one index block, the following syntax may
be used:

\begin{verbatim}
plot 'data.dat' index 1
\end{verbatim}

\noindent To achieve the default behaviour of plotting all index blocks, the
{\tt index} modifier should be followed by a negative number.\indmod{index}

It is also possible to specify which lines and/or data blocks to plot from
within each index. To do so, the \indmodt{every} modifier is used, which takes
up to six values, separated by colons:\label{sec:every}

\begin{verbatim}
plot 'data.dat' every a:b:c:d:e:f
\end{verbatim}

\noindent The values have the following meanings:

\begin{longtable}{p{1.0cm}p{10.5cm}}
$a$ & Plot data only from every $a\,$th line in \datafile. \\
$b$ & Plot only data from every $b\,$th block within each index block. \\
$c$ & Plot only from line $c$ onwards within each block. \\
$d$ & Plot only data from block $d$ onwards within each index block. \\
$e$ & Plot only up to the $e\,$th line within each block. \\
$f$ & Plot only up to the $f\,$th block within each index block. \\
\end{longtable}

\noindent Any or all of these values can be omitted, and so the following would
both be valid statements:

\begin{verbatim}
plot 'data.dat' index 1 every 2:3
plot 'data.dat' index 1 every ::3
\end{verbatim}

\noindent The first would plot only every other \datapoint\ from every third
data block; the second from the third line onwards within each data block.

\example{ex:datafile}{An example}{
Here, we have an example of plotting a datafile.
}

\subsection{Horizontally arranged \Datafile s}

\index{horizontal datafiles}\index{datafiles!horizontal}\index{using rows
modifier@{\tt using rows} modifier}\index{using columns modifier@{\tt using
columns} modifier}\label{sec:horizontal_datafiles} The command syntax for plotting
columns of \datafile s against one another was previously described in
Section~\ref{sec:plot_datafiles}. PyXPlot also allows you to plot {\it rows} of
data against one another in horizontally-arranged \datafile s.  For this, the
keyword \indkeyt{rows} is placed after the {\tt using} modifier:

\begin{verbatim}
plot 'data.dat' index 1 using rows 1:2
\end{verbatim}

\noindent For completeness, the syntax {\tt using} \indkeyt{columns} is also
accepted, to specify the default behaviour of plotting columns against one
another:

\begin{verbatim}
plot 'data.dat' index 1 using columns 1:2
\end{verbatim}

When plotting horizontally-arranged \datafile s, the meanings of the {\tt
index} and {\tt every} modifiers (see Section~\ref{sec:plot_datafiles}) are
altered slightly. The former continues to refer to vertically-displaced blocks
of data separated by two blank lines.  Blocks, as referenced in the {\tt every}
modifier, likewise continue to refer to vertically-displaced blocks of
\datapoint s, separated by single blank lines. The row numbers passed to the
{\tt using} modifier are counted from the top of the current block.

However, the line-numbers specified in the \indmodt{every} modifier -- i.e.\
variables $a$, $c$ and $e$ in the system introduced in Section~\ref{sec:every}
-- now refer to horizontal columns, rather than lines. For example:

\begin{verbatim}
plot 'data.dat' using rows 1:2 every 2::3::9
\end{verbatim}

\noindent would plot the data in row 2 against that in row 1, using only the
values in every other column, between columns 3 and 9.

\subsection{Choosing which Data to Plot}
\label{sec:select_modifier}
As well as the {\tt plot} command's {\tt index}, {\tt using} and {\tt every}
modifiers, which allow users to plot subsets of data from \datafile s, it also
has a further modifier, \indmodt{select}. This can be used to plot only those
\datapoint s in a \datafile\ which specify some given criterion. For example:

\begin{verbatim}
plot 'data.dat' select ($8>5)
plot sin(x) select (($1>0) and ($2>0))
\end{verbatim}

\noindent In the second example, two selection criteria are given, combined
with the logical {\tt and} operator. A full list of all of the operators
recognised by PyXPlot, including logical operators, was given in
Chapter~\ref{ch:first_steps}; see Table~\ref{tab:operators_table}.  The select
modifier has many applications, for example, plotting two-dimensional slices of
three-dimensional datasets and plotting subsets of data from files.

When plotting using the \indpst{lines} style, the default behaviour is for the
lines plotted not to be broken if a set of datapoints are removed by the select
modifier.  However, this behaviour is sometimes undesirable.  To cause the
plotted line to break when points are removed the \indmodt{discontinuous}\
modifier is supplied.  For example:

\begin{verbatim}
plot sin(x) select ($1>0) discontinuous
\end{verbatim}

\noindent plots a set of disconnected peaks from the sine function.

\example{ex:select}{An example}{
Here, we have an example of the use of the {\tt select} modifier.
}

\section{Directing Where Output Goes}

\label{sec:directing_output}

By default, when PyXPlot is used interactively, all plots are displayed on the
screen. It is also possible to produce postscript output, to be read into other
programs or embedded into \LaTeX\ documents, as well as a variety of other
graphical formats. The \indcmdt{set terminal}\footnote{Gnuplot users should
note that the syntax of the {\tt set terminal} command in PyXPlot is somewhat
different from that which they are used to; see
Section~\ref{sec:set_terminal}.} is used to specify the output format that is
required, and the \indcmdt{set output} is used to specify the file to which
output should be directed. For example,

\begin{verbatim}
set terminal postscript
set output 'myplot.eps'
plot sin(x)
\end{verbatim}

\noindent would output a postscript plot of $\sin(x)$ to the file
{\tt myplot.eps}.

The \indcmdt{set terminal} can also be used to configure various output options
within each supported file format.  For example, the following commands would
produce black-and-white or colour output respectively:

\begin{verbatim}
set terminal monochrome
set terminal colour
\end{verbatim}

\noindent The former is useful for preparing plots for black-and-white
publications, the latter for preparing plots for colourful presentations.

Both encapsulated and non-encapsulated postscript can be produced. The former
is recommended for producing figures to embed into documents, the latter for
plots which are to be printed without further processing. The
{\tt postscript} terminal produces the latter; the {\tt eps} terminal
should be used to produce the former.  Similarly the {\tt pdf} terminal
produces files in the portable document format (pdf)\index{pdf format} read by
Adobe Acrobat\index{Adobe Acrobat}:

\begin{verbatim}
set terminal postscript
set terminal eps
set terminal pdf
\end{verbatim}

It is also possible to produce plots in the gif, png and jpeg graphic formats,
as follows:

\begin{verbatim}
set terminal gif
set terminal png
set terminal jpg
\end{verbatim}

More than one of the above keywords can be combined on a single line, for
example:

\begin{verbatim}
set terminal postscript colour
set terminal gif monochrome
\end{verbatim}

To return to the default state of displaying plots on screen, the {\tt x11}
terminal should be selected:

\begin{verbatim}
set terminal x11
\end{verbatim}

For more details of the \indcmdt{set terminal}, including how to produce gif
and png images with transparent backgrounds, see
Section~\ref{sec:set_terminal}.

We finally note that, after changing terminals, the \indcmdt{replot} is
especially useful; it repeats the last {\tt plot} command. If any plot items
are placed after it, they are added to the pre-existing plot.

\section{Setting the Size of Output}

The widths of plots may be set be means of two commands -- {\tt set
size}\indcmd{set size} and {\tt set width}\indcmd{set width}. Both are
equivalent, and should be followed by the desired width measured in
centimetres, for example:

\begin{verbatim}
set width 20
\end{verbatim}

The {\tt set size} command can also be used to set the aspect ratio of plots by
following it with the keyword {\tt ratio}\indcmd{set size ratio}. The number
which follows should be the desired ratio of height to width. The following,
for example, would produce plots three times as high as they are wide:

\begin{verbatim}
set size ratio 3.0
\end{verbatim}

\noindent The command {\tt set size noratio} returns to PyXPlot's default
aspect ratio of the golden ratio, i.e.\ $\left((1+\sqrt{5})/2\right)^{-1}$. The
special command {\tt set size square}\indcmd{set size square} sets the aspect
ratio to unity.

\section{Data Styles}

By default, data from files are plotted with points and functions are plotted
with lines. However, either kinds of data can be plotted in a variety of ways.
To plot a function with points, for example, the following syntax is
used\footnote{Note that when a plot command contains {\tt using}, {\tt every}
and {\tt with} modifiers, the {\tt with} modifier must come
last.}\indmod{with}:

\begin{verbatim}
plot sin(x) with points
\end{verbatim}

\noindent The number of points displayed (i.e.\ the number of samples of the
function) can be set as follows\indcmd{set samples}:

\begin{verbatim}
set samples 100
\end{verbatim}

\noindent Likewise, \datafile s can be plotted with a line connecting the data
points:

\begin{verbatim}
plot 'data.dat' with lines
\end{verbatim}

A variety of other styles are available. The \indpst{linespoints} plot style
combines both the \indpst{points} and \indpst{lines} styles, drawing lines
through points. Errorbars can also be drawn as follows:\indps{yerrorbars}

\begin{verbatim}
plot 'data.dat' with yerrorbars
\end{verbatim}

\noindent In this case, three columns of data need to be specified: the $x$-
and $y$-co-ordinates of each \datapoint, plus the size of the vertical errorbar
on that \datapoint. By default, the first three columns of the \datafile\ are
used, but once again (see Section~\ref{sec:plot_datafiles}), the {\tt using}
modifier can be used:

\begin{verbatim}
plot 'data.dat' using 2:3:7 with yerrorbars
\end{verbatim}

More details of the {\tt errorbars} plot style can be found in
Section~\ref{sec:errorbars}. Other plot styles supported by PyXPlot are listed in
Section~\ref{sec:list_of_plotstyles}, and their details can be found in many
\gnuplot\ tutorials. Bar charts will be discussed further in
Section~\ref{sec:barcharts}.

\label{sec:pointtype}
The modifiers \indpst{pointtype} and \indpst{linetype}, which can be
abbreviated to {\tt pt} and {\tt lt} respectively, can also be placed after the
{\tt with} modifier. Each should be followed by an integer.  The former
specifies what shape of points should be used to plot the dataset, and the
latter whether a line should be continuous, dotted, dash-dotted, etc.
Different integers correspond to different styles.

The default plotting style referred to above can also be changed.  For example:

\begin{verbatim}
set style data lines
\end{verbatim}

\noindent would change the default style used for plotting data from files to
lines. Similarly, the \indcmdt{set style function} changes the default style
used when functions are plotted.

\example{ex:errorbars}{An example}{
Here, we have an example of the errorbars plot style.
}

\section{Setting Axis Ranges}
\label{sec:plot_ranges}

In Section~\ref{sec:first_plots}, the {\tt set xlabel} configuration command
was previously introduced for placing text labels on axes. In this section, the
configuration of axes is extended to setting their ranges.

By default, PyXPlot automatically scales axes to some sensible range which
contains all of the plotted data. However, it is possible for the user to
override this and set his own range.\index{axes!setting ranges} This can be
done directly from the plot command, as in the following plot of the first
three cylindrical Bessel functions:

\begin{verbatim}
plot [0:10][-0.5:1] besselJ(0,x), besselJ(1,x), besselJ(2,x)
\end{verbatim}
\begin{center}
\includegraphics[width=8cm]{examples/eps/ex_intro_bessel.eps}
\end{center}

\noindent The ranges are specified immediately after the \indcmdt{plot}, with
the syntax {\tt [minimum:maximum]}.\footnote{An alternative valid syntax is to
replace the colon with the word {\tt to}: {\tt [minimum to maximum]}.} The
first specified range applies to the $x$-axis, and the second to the
$y$-axis.\footnote{As will be discussed in Section~\ref{sec:multiple_axes}, if
further ranges are specified, they apply to the $x2$-axis, then the $y2$-axis,
and so forth.} Any of the values can be omitted, as in the following plot of
three Legendre polynomials:

\begin{verbatim}
plot [-1:1][:] legendreP(2,x), legendreP(4,x), legendreP(6,x)
\end{verbatim}
\begin{center}
\includegraphics[width=8cm]{examples/eps/ex_intro_legendre.eps}
\end{center}

\noindent would only set a range on the $y$-axis.

Alternatively, ranges can be set before the {\tt plot} statement, using the
\indcmdt{set xrange}, for example:

\begin{verbatim}
set xrange [-2:2]
set y2range [a:b]
\end{verbatim}

If an asterisk is supplied in place of either of the limits in this command, then
any limit which had previously been set is switched off, and the axis returns to
its default autoscaling behaviour:

\begin{verbatim}
set xrange [-2:*]
\end{verbatim}

\noindent A similar effect may be obtained using the \indcmdt{set autoscale},
which takes a list of the axes to which it is to apply. Both the upper and
lower limits of these axes are set to scale automatically. If no list is
supplied, then the command is applied to all axes.

\begin{verbatim}
set autoscale x y
set autoscale
\end{verbatim}

Axes can be set to have logarithmic scales by using the \indcmdt{set logscale},
which also takes a list of axes to which it should apply. Its converse is
\indcmdts{set nologscale}:

\begin{verbatim}
set logscale
set nologscale y x x2
\end{verbatim}

Further discussion of the configuration of axes can be found in
Section~\ref{sec:multiple_axes}.

\example{ex:axislab}{A diagram of the trajectories of projectiles fired with different initial velocities}{
In this example we produce a diagram of the trajectories of projectiles fired
by a cannon from the origin with different initial velocities and at different
angles of inclination.  We first define a function {\tt h}$()$ which gives the
height of a projectile when it is at a horizontal distance $x$ from the cannon,
if it is fired at angle $\theta$ to the horizontal and with initial velocity
$v$. We then plot this function for three different sets of inputs.\\

\vspace{3mm}
{\footnotesize
\noindent {\tt g~~~= 9.81~~~~\# Acceleration due to gravity}\newline
\noindent {\tt d2r~= pi/180~~\# Convert degrees to radians}\newline
\noindent {\tt }\newline
\noindent {\tt \# The mathematical equation of a trajectory}\newline
\noindent {\tt h(x,theta,v) = x*tan(theta*d2r) - 0.5*g*x**2/(v**2*cos(theta*d2r)**2)}\newline
\noindent {\tt }\newline
\noindent {\tt \# Plot configuration}\newline
\noindent {\tt set xlabel "\$x/{$\backslash$rm m}\$"}\newline
\noindent {\tt set ylabel "\$h/{$\backslash$rm m}\$"}\newline
\noindent {\tt set xrange [0:20]}\newline
\noindent {\tt set yrange [0:]}\newline
\noindent {\tt set key below}\newline
\noindent {\tt set title 'Trajectories of projectiles fired with speed \$v\$ and angle \$$\backslash$theta\$'}\newline
\noindent {\tt plot h(x,30,10) title "\$$\backslash$theta=30\^{}$\backslash$circ;$\backslash$qquad v=10$\backslash$,\{$\backslash$rm m$\backslash$,s\^{}\{-1\}\}\$",}\newline
\noindent {\tt \phantom{xxxxx}h(x,60,10) title "\$$\backslash$theta=60\^{}$\backslash$circ;$\backslash$qquad v=10$\backslash$,\{$\backslash$rm m$\backslash$,s\^{}\{-1\}\}\$",}\newline
\noindent {\tt \phantom{xxxxx}h(x,60,15) title "\$$\backslash$theta=60\^{}$\backslash$circ;$\backslash$qquad v=15$\backslash$,\{$\backslash$rm m$\backslash$,s\^{}\{-1\}\}\$",}\newline
}
\begin{center}
\includegraphics[width=\textwidth]{examples/eps/ex_trajectories.eps}
\end{center}
}

\section{Interactive Help}

In addition to this {\it Users' Guide}, PyXPlot also has a \indcmdt{help},
which provides a hierarchical source of information. Typing {\tt help} alone
gives a brief introduction to the help system, as well as a list of topics on
which help is available. To display help on any given topic, type {\tt help}
followed by the name of the topic. For example:

\begin{verbatim}
help commands
\end{verbatim}

\noindent provides information on PyXPlot's commands. Some topics have
sub-topics, which are listed at the end of each page. To view them, add further
words to the end of your help request -- an example might be:

\begin{verbatim}
help commands help
\end{verbatim}

\noindent which would display help on the {\tt help} command itself.

