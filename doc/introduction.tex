% INTRODUCTION.TEX
%
% The documentation in this file is part of PyXPlot
% <http://www.pyxplot.org.uk>
%
% Copyright (C) 2006-9 Dominic Ford <coders@pyxplot.org.uk>
%               2009   Ross Church
%
% $Id$
%
% PyXPlot is free software; you can redistribute it and/or modify it under the
% terms of the GNU General Public License as published by the Free Software
% Foundation; either version 2 of the License, or (at your option) any later
% version.
%
% You should have received a copy of the GNU General Public License along with
% PyXPlot; if not, write to the Free Software Foundation, Inc., 51 Franklin
% Street, Fifth Floor, Boston, MA  02110-1301, USA

% ----------------------------------------------------------------------------

% LaTeX source for the PyXPlot Users' Guide

\chapter{Introduction} \pagenumbering{arabic}

\label{ch:introduction}

\section{Overview}

{\sc PyXPlot} is a multi-purpose command-line tool for performing simple data
processing and for producing simple vector graphics. The central philosophy of
PyXPlot's interface is that common tasks -- for example, plotting a graph of
data from a file and then performing simple manupulations on that graph --
should be immediately available at the user's fingertips through an intuitive
interface which does not require to user to have memorised any obscure command
syntax.  At the same time, PyXPlot also aims to provide sufficient
configurability to be able to produce figures which are amply neat enough to
include in reports, talks or academic journals.

PyXPlot is much more than just a graph plotting package, though. It also has
facilities for fitting best-fit curves to data, for numerically solving simple
systems of equations, and for converting data files between different formats.
It is also a remarkably powerful desktop calculator which can keep track of the
physical dimensions of variables and convert between different units of
measurement -- for example, between inches and centimetres.

\section{PyXPlot's Heritage: \gnuplot}

Readers who have used \gnuplot\ in the past will rapidly notice that PyXPlot's
interface bears some striking similarities with that of
\gnuplot.\footnote{\gnuplot's output may not look very pretty by modern
standards, but its interface is superbly quick and intuitive to use. This,
together with its free availability, is doubtless why it remains so popular.}
Specifically, the commands used for plotting {\it simple} graphs are virtually
identical in the two programs, though the syntax used for more advanced
plotting often differs. This means that \gnuplot\ users will have a head start
with PyXPlot: simple \gnuplot\ scripts will often run in PyXPlot with minimal
modification.

The principal difference between the two programs which \gnuplot\ users will
need to be aware of is that PyXPlot renders all of its text labels
automatically in the \LaTeX\ typesetting environment. This produces much neater
labels than the default typesetting engine used by \gnuplot, and makes it
straightforward to label graphs with mathematical expressions. Moreover, if you
plan to import your graphs into a \LaTeX\ document, it makes it straightforward
to match the fonts used in your figures with those used in the main text of
your document.

This does, however, necessarily introduce some incompatibility with \gnuplot,
since some strings which were valid before are no longer valid (see
Section~\ref{sec:latex_incompatibility} for more details). For
example:\index{latex}

\begin{dontdo}
set xlabel 'x\^{}2'
\end{dontdo}

\noindent would have been valid in \gnuplot, but is not valid input for \LaTeX:
it needs to be written in \LaTeX\ mathmode as:

\begin{dodo}
set xlabel '\$x\^{}2\$'
\end{dodo}

\noindent It is our view, though, that the nuisance of this incompatibility is
far outweighed by the power that \LaTeX\ brings, however. For users with no
prior knowledge of \LaTeX\ we recommend Tobias Oetiker's\index{Tobias Oetiker}
excellent introduction, {\it The Not So Short Guide to \LaTeX\
$2\epsilon$}\index{Not So Short Guide to \LaTeX\ $2\epsilon$,
The}\footnote{Download from:\\
\url{http://www.ctan.org/tex-archive/info/lshort/english/lshort.pdf}}. Later in
this manual, we will also show that PyXPlot's built-in  {\tt texify()} function
can also automatically convert strings of text into valid \LaTeX.

\section{Where's PyXPlot's GUI?}

PyXPlot doesn't have a graphical interface yet, and we have no imminent plans
to add one. We would argue that a well-designed command-line interface is
invariably faster to use than a graphical interface once learnt, and that
command-line interfaces bring many powerful features -- for example, the
ability to trivially write batch scripts to perform the same set of commands
many times on many different \datafile s -- which graphical interfaces lack.
Moreover, in the command-driven interface you can keep a list of the commands
that you typed to produce a particular plot in order to reproduce it at any
time. In a graphical interface, it's very easy to forget exactly which control
you clicked on to get a particular result.

\section{Can I call PyXPlot from inside my program?}

Yes you can, by opening a UNIX pipe from your program to a PyXPlot process.
However, we would generally discourage you from doing that.  Unless you really
{\it need} to do otherwise, we would recommend you to write your data to a file
on disk, and then to plot it from inside PyXPlot in a separate step.  Whilst it
is often tempting to write programs which both perform calculations and plot
the results immediately, this can be a dangerous path. A few months after the
event, when the need arises to replot the same data in a different form or in a
different style, remembering how to use a sizeable program can prove tricky --
especially if the person struggling to do so is not you! But a simple
\datafile\ is quite straightforward to plot time and again.

\section{The Structure of this Manual}

This manual aims to serve both as a tutorial guide to PyXPlot, and also as a
reference manual. The first half of this manual provides a step-by-step
tutorial, including numerous worked examples, meanwhile the appendices provide
a complete reference guide to all of PyXPlot's commands.

The similarity of PyXPlot's interface to that of \gnuplot\ is such that
\gnuplot\ users will have a considerable head start with PyXPlot.  Broadly
speaking, Chapter~\ref{ch:first_steps} covers those commands which are common
between the two programs, and past \gnuplot\ users may wish to skim rather
briefly over this chapter. An approximate list of those features of \gnuplot\
which are either not-supported, or which are substantially different, in
PyXPlot can be found in Appendix~\ref{ch:gnuplot_diffs}.

\section{System Requirements}

PyXPlot works on most UNIX-like operating systems. We have tested it under
Linux, Solaris\index{Solaris} and MacOS~X\index{MacOS X}, and believe that it
should work on other similar POSIX systems. It requires that the following
software packages (not included) be installed:\index{system requirements}

\vspace{0.5cm}
\begin{itemize}
\item Ghostscript \index{Ghostscript}
\item The Gnu Scientific Library (version 1.10+) \index{gsl}
\item ImageMagick \index{ImageMagick}
\item latex (version $2\epsilon$) \index{latex}
\item libxml2 (version 2.6+) \index{libxml}
\item libjpeg (version 6.2+) \index{libjpeg}
\item sed \index{sed}
\end{itemize}
\vspace{0.5cm}

\noindent It is very strongly recommended that the following software packages
also be installed. In each case, PyXPlot tests for the available of these
packages upon installation, and issues a warning if the package is not found.
Installation can proceed, but some of PyXPlot's features will be disabled.

\vspace{0.5cm}
\begin{itemize}
\item cfitsio -- required in order to plot \datafile s in FITS format.
\item Ghostview (or {\tt ggv}) \index{Ghostview} -- required in order for PyXPlot to display plots live on the screen; PyXPlot remains able to generate image files on disk without Ghostview.
\item gunzip \index{gunzip} -- required in order to plot compressed data files in {\tt .gz} format.
\item The Gnu Readline Library (version 5+) \index{readline} -- required in order to provide tab completion and command histories in PyXPlot's interactive command-line interface.
\item wget \index{wget} -- required in order to plot data files directly from the internet.
\end{itemize}
\vspace{0.5cm}

Debian and Ubuntu users can find the above software in the packages {\tt gs},
{\tt gv}, {\tt imagemagick}, {\tt libcfitsio3-dev}, {\tt libgsl0-dev}, {\tt
libjpeg62-dev}, {\tt libreadline5-dev}, {\tt libxml2-dev}, {\tt tetex-extra},
{\tt wget}.\index{Debian Linux}\index{Ubuntu Linux}\index{installation!under
Debian}\index{installation!under Ubuntu}

\section{Installation}
\index{installation}

\subsection{Installation within Linux Distributions}

PyXPlot is available as a user-installable package within some Linux
distributions. At the time of writing, Gentoo\index{Gentoo
Linux}\index{installation!under Gentoo}\footnote{See
\url{http://gentoo-portage.com/sci-visualization/pyxplot}}, Ubuntu\index{Ubuntu
Linux}\index{installation!under Ubuntu} and Debian provide packages containing
PyXPlot~0.7.0. It should be noted that this manual describes PyXPlot~0.8.0,
which is a very substantial upgrade to version~0.7.0. Many of the features
described in this manual are not available in previous versions.

Under Debian and Ubuntu Linux, version~0.8.0 may be manually installed by
downloading the file {\tt pyxplot\_0.8.0.deb} from the PyXPlot website and
typing:

\begin{verbatim}
dpkg -i pyxplot_0.8.0.deb
\end{verbatim}

\subsection{Installation as User}

The following steps describe the installation of PyXPlot from a {\tt .tar.gz}
archive by a user without superuser (i.e.\ root) access to his machine. The
required archive can be downloaded from the PyXPlot website. It is assumed that
the packages listed above have already been installed; if they are not, you
will need to contact your system administrator.\index{installation!user-level}

\begin{itemize}
\item Unpack the distributed .tar.gz:

\begin{verbatim}
tar xvfz pyxplot_0.8.0.tar.gz
cd pyxplot
\end{verbatim}

\item Run the installation script:

\begin{verbatim}
./configure
make
\end{verbatim}

\item Finally, start PyXPlot:

\begin{verbatim}
./bin/pyxplot
\end{verbatim}

\end{itemize}

\subsection{System-wide Installation}

Having completed the steps described above, PyXPlot may be installed
system-wide by a superuser with the following additional
step:\index{installation!system-wide}

\begin{verbatim}
make install
\end{verbatim}

By default, the PyXPlot executable installs to {\tt /usr/local/bin/pyxplot}.
If desired, this installation path may be modified in the file {\tt
Makefile.skel}, by changing the variable {\tt USRDIR} in the first line to an
alternative desired installation location.

PyXPlot may now be started by any system user, simply by typing:

\begin{verbatim}
pyxplot
\end{verbatim}

\section{A Whirlwind Tour of PyXPlot's Features}

The problem of learning to use a new software package is often as much one of
working out what it can do, and whether it is suited to a particular task, than
one of learning the syntax used to drive it. For this reason, this section
provides a brief tour of a subset of PyXPlot's features, with references to
those chapters of the manual where further details can be found. This section
does not aim to provide a tutorial in itself, and hence no explanation of the
syntax of quoted PyXPlot commands will be given, however the user is encouraged
to paste the examples given into PyXPlot and to experiment with them.

The workhorse command of PyXPlot is the \indcmdt{plot}, which can be used to
plot graphs of either mathematical functions, by typing, for example

\begin{verbatim}
plot log(x)
\end{verbatim}

\noindent or data files, by typing\footnote{This example requires you to have a
plain text data file called {\tt datafile} in your current working directory,
and is the only example in this section which may not work out of the box.}

\begin{verbatim}
plot 'datafile'
\end{verbatim}

\noindent There are many commands which allow you to configure the appearance
of the plots produced by the \indcmdt{plot}, which are discussed at length in
Chapters~\ref{ch:first_steps} and~\ref{ch:plotting}.

PyXPlot has extensive facilities for converting \datafile s between different
physical units, and this also makes it a remarkably powerful desktop
calculator. For example, you can define a variable which has physical
dimensions of length, and then display its value in different units as follows:

\begin{verbatim}
x = 2 * unit(m)
print x / unit(inch)
\end{verbatim}

\noindent The way in which physical units are displayed can be extensively
configured -- for example, the use of SI prefixes such as milli- and kilo- can
be turned on or off, the user can request that quantities be displayed in CGS
or imperial units by default, and values can be displayed in a way which can be
directly pasted either into another PyXPlot calculation, or into a \LaTeX\
document.

Attachment of physical dimensions to variables allows PyXPlot to test whether
algebraic expressions are dimensionally correct, and to throw errors where
expressions are clearly incorrect. This would happen, for example, if the user
were continue the previous example by typing:

\begin{verbatim}
print x*x + x
\end{verbatim}

\noindent This is clearly not correct, since a term with dimensions of area is
being added to a term with dimensions of length. More details of the use of
physical units in PyXPlot are given in Section~\ref{sec:units}, and
Appendix~\ref{ch:unit_list} lists all of the physical units which PyXPlot
recognises by default. In addition, Chapter~\ref{ch:configuration} describes a
way to add new physical units to PyXPlot's repertoire.

PyXPlot can perform algebra on complex as well as real numbers. By default,
evaluation of {\tt sqrt(-1)} throws an error, as the emergence of complex
numbers is not always the desired result when a calculation goes wrong, but
complex arithmetic can be enabled by typing:\indcmd{set numerics complex}

\begin{verbatim}
set numerics complex
print sqrt(-1)
\end{verbatim}

\noindent Many of the mathematical functions which are built into PyXPlot, a
complete list of which can be found in Appendix~\ref{ch:function_list} or by
typing {\tt show functions} into PyXPlot, can take complex arguments, for
example:

\begin{verbatim}
print exp(2+3*i)
print sin(i)
\end{verbatim}

\noindent For more details, see Section~\ref{sec:complex_numbers}.

In the above example, the variable {\tt i} is a pre-defined constant in
PyXPlot, in this case set to equal $\sqrt{-1}$. PyXPlot has many other
pre-defined physical constants, and complete list of which can found in
Appendix~\ref{ch:constants} or by typing {\tt show variables} into PyXPlot.
These, together with the physical units which are built into PyXPlot make it
easy to answer a wide range of questions very quickly:

\begin{itemize}
\item What is $80^\circ$F in Celsius?
\begin{verbatim}
pyxplot> print 80*unit(oF) / unit(oC)
26.666667
\end{verbatim}

\item How long does it take for light to travel from the Sun to the Earth?
\begin{verbatim}
pyxplot> print unit(AU) / phy_c
499.00478 s
\end{verbatim}

\item What wavelength of light corresponds to the ionisation energy of hydrogen (13.6\,eV)?
\begin{verbatim}
pyxplot> print phy_c * phy_h / (13.6 * unit(eV))
91.164844 nm
\end{verbatim}

\item What is the escape velocity of the Earth?
\begin{verbatim}
pyxplot> print sqrt(2 * phy_G * unit(Mearth) / unit(Rearth))
11.186948 km/s
\end{verbatim}
\end{itemize}

In addition, PyXPlot provides extensive functions for numerically solving
equations, which will be described in Chapter~\ref{ch:numerics}. The following
example evaluates $\int_{0\,\mathrm{s}}^{2\,\mathrm{s}} x^2\,\mathrm{d}x$:

\begin{verbatim}
pyxplot> print int_dx(x**2,0*unit(s),2*unit(s))
2.6666667 s**3
\end{verbatim}

This example solves a simple pair of simultaneous equations of two variables:

\begin{verbatim}
pyxplot> solve x+y=1 , 2*x+3*y=7 via x,y
pyxplot> print "x=%s; y=%s"%(x,y)
x=-4; y=5
\end{verbatim}

And this example searches for the minimum of the function $\cos(x)$ closest to $x=0.5$:

\begin{verbatim}
pyxplot> x=0.5
pyxplot> minimise cos(x) via x
pyxplot> print x
3.1415927
\end{verbatim}

This tour has touched briefly upon many areas of PyXPlot's functionality, but
has not discussed its facilities for producing vector graphics. It is not
straightforward to produce non-trivial vector graphics in an example as short
as those given above, but the full details of the commands used will be
described in Chapter~\ref{ch:vector_graphics}.

\section{Credits}

PyXPlot owes a great debt to \gnuplot's intuitive interface, for which thanks
must go to Thomas Williams and Colin Kelley.  It also owes a substantial
historical debt to the PyX\index{PyX} graphics library for Python, written by
J\"org Lehmann and Andr\'e Wobst.  Earlier versions of PyXPlot used PyX to
produce their graphical output, and though we now use our own graphics engine,
PyX's neat output remains the original inspration for PyXPlot.

Several people have contributed to PyXPlot's development in ways which deserve
special mention.  Matthew Smith provided extensive advice on many mathematical
matters, provided an implementation of the Riemann zeta function for general
complex inputs, and suggested many mathematical functions which ought to be
made available. Dave Ansell provided many good ideas which have shaped
PyXPlot's interface. The writing of PyXPlot's postscript engine was
substantially eased thanks to the help of Michael Rutter, who happily shared
his code and past experiences with us.

We are also very grateful to our team of alpha testers, without whose work this
release of PyXPlot would doubtless contain many more bugs than it does: thanks
go to XXX.

Finally, we would like to think all of the users who have got in touch with us
by email since PyXPlot was first released on the web in~2006. Your feedback and
suggestions have been gratefully received.

\section{License}

This manual and the software which it describes are both copyright \copyright\
Dominic Ford~2006-9, Ross Church~2009. They are distributed under the GNU
General Public License (GPL) Version~2, a copy of which is provided in the {\tt
COPYING} file in this distribution.\index{General Public
License}\index{license} Alternatively, it may be downloaded from the web, from
the following location:\\ \url{http://www.gnu.org/copyleft/gpl.html}.

